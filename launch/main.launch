<?xml version="1.0"?>

<launch>
   
  <env name="GAZEBO_MODEL_PATH" value="$(find bebop_gazebo)/models:$GAZEBO_MODEL_PATH" />
	

  <!-- Start Gazebo with wg world running in (max) realtime -->
  <include file="$(find hector_gazebo_worlds)/launch/start.launch">
   <arg name="world" value="worlds/zephyr_demo.world"/>
  <!-- <arg name="world" value="$(find uav_landing)/worlds/hecto.world"/> -->
  </include>


  <node name="spawn_helipad" pkg="gazebo_ros" type="spawn_model"
      args="-file $(find bebop_gazebo)/models/marker3/model.sdf
         -model marker3 -sdf
         -x 10.0
         -y 1.0
         -z 0.3"
      respawn="false" output="screen"/>
  
 <!-- <node pkg="uav_landing" type="camera_feed_processor.py" name="camera_feed_processor" output="screen" respawn = "true"/> -->

  <node pkg="uav_landing" type="moving_helipad.py" name="moving_helipad" output="screen" >
      <param name="x_vel" type="double" value="0.0" />
      <param name="y_vel" type="double" value="2.0" />
      <param name="seconds_before_moving" type="double" value="2" />
  </node>

<!-- https://answers.ros.org/question/150756/ar_track_alvar-image-topic-to-point-cloud/ -->
  <!--<include file = "$(find ar_track_alvar)/launch/pr2_indiv_no_kinect.launch">
      <arg name = "marker_size" value = "5"/>
      <arg name = "cam_image_topic" value = "/downward_cam/camera/image"/>
      <arg name = "cam_info_topic" value = "/downward_cam/camera/camera_info"/>
      <arg name="output_frame" default="/base_link" />
  </include>-->

  <include file = "$(find uav_landing)/launch/hector_helipad_individual.launch">
  </include>

  <!-- Launch file for visual odometry -->
  <include file = "$(find uav_landing)/launch/visual_odometry.launch">
  </include>

  <!-- Node for state estimation of the quadrotor -->
  <!--<node pkg="hector_pose_estimation" type="pose_estimation" name="hector_pose_estimation" />-->

  <!-- Spawn simulated quadrotor uav -->
  <include file="$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch" >
    <arg name="model" value="$(find hector_quadrotor_description)/urdf/quadrotor_downward_cam.gazebo.xacro"/>
    <arg name="controllers" value=" 
        controller/attitude
        controller/velocity
        controller/position
        "/>

  </include>

  <!-- Start rviz visualization with preset config -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find hector_quadrotor_demo)/rviz_cfg/outdoor_flight.rviz"/>


</launch>
